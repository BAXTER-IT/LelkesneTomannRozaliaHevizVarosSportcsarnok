@use '../../../styles.scss' as global; // Import global variables

:host {
  display: block;
  padding: calc(var(--spacing-unit) * 2);
  background-color: var(--surface-color);
  border-radius: var(--border-radius);
  box-shadow: var(--box-shadow);
}

h2 {
  text-align: center;
  margin-bottom: calc(var(--spacing-unit) * 2.5);
  color: var(--text-color);
  font-size: 1.5rem;
}

.order-book-actions {
  margin-bottom: calc(var(--spacing-unit) * 2);
  text-align: right; // Or center, or left, depending on desired placement

  button {
    padding: var(--spacing-unit) calc(var(--spacing-unit) * 2);
    background-color: var(--primary-color);
    color: var(--button-text-color);
    border: none;
    border-radius: var(--border-radius);
    cursor: pointer;
    font-size: 0.9rem;
    font-weight: 500;
    transition: background-color 0.2s ease;

    &:hover {
      background-color: darken(global.$primary-color-value, 8%); // Use SASS darken
    }
  }
}

.order-book-page-container { // New container for side-by-side layout
  display: flex;
  gap: calc(var(--spacing-unit) * 2);
  align-items: flex-start; // Align items to the top
}

.order-book-main-content { // Wrapper for the existing order book
  flex: 1; // Takes up available space, can be adjusted
}

.order-entry-form-container {
  width: 350px; // Fixed width for the form, adjust as needed
  flex-shrink: 0; // Prevent shrinking
  // Optional: Add border, padding, background if it needs to be visually distinct
  // background-color: var(--surface-color-secondary);
  // padding: calc(var(--spacing-unit) * 2);
  // border-radius: var(--border-radius);
  // box-shadow: var(--box-shadow-sm);
}

.order-book-container {
  display: flex;
  flex-wrap: wrap; // Allow wrapping on smaller screens
  gap: calc(var(--spacing-unit) * 3); // Space between bids and asks sections
  justify-content: space-around; // Distribute space
}

.bids,
.asks {
  flex: 1; // Each section tries to take equal width
  min-width: 300px; // Minimum width before wrapping or shrinking too much
  padding: calc(var(--spacing-unit) * 2);
  border-radius: var(--border-radius);
  // background-color: lighten(var(--background-color), 2%); // Slightly different bg for sections

  h3 {
    text-align: center;
    margin-bottom: calc(var(--spacing-unit) * 1.5);
    font-size: 1.25rem;
  }
}

.bids h3 {
  color: var(--bid-color);
}

.asks h3 {
  color: var(--ask-color);
}

table {
  width: 100%;
  border-collapse: collapse;

  th, td {
    padding: var(--spacing-unit) calc(var(--spacing-unit) * 1.5);
    text-align: right;
    border-bottom: 1px solid var(--border-color);
  }

  th {
    color: var(--muted-text-color);
    font-weight: 500;
    font-size: 0.9rem;
    text-transform: uppercase;
    background-color: var(--background-color); // Header background for table
  }

  td {
    font-size: 0.95rem;
  }

  tbody tr {
    &:hover {
      background-color: var(--background-color);
    }

    // Styling for user-specific order entries, applied if <tr> has this class
    &.user-order-entry {
      background-color: var(--user-order-entry-bg);
      color: var(--user-order-entry-text-color);
      font-weight: var(--user-order-entry-font-weight);

      td {
        font-size: var(--user-order-entry-font-size);
      }
    }
  }
} // This closes the 'table' selector

// Specific coloring for bid/ask rows - these should be separate from the main table block or correctly nested if they apply within .bids/.asks tables
.bids table tbody tr td:first-child { // Price column for bids - more specific selector
  color: var(--bid-color);
  font-weight: 500;
}
.asks table tbody tr td:first-child { // Price column for asks - more specific selector
  color: var(--ask-color);
  font-weight: 500;
}

.error {
  color: var(--danger-color);
  text-align: center;
  padding: var(--spacing-unit);
  background-color: lighten(global.$danger-color-value, 35%);
  border: 1px solid var(--danger-color);
  border-radius: var(--border-radius);
}

.timestamp {
  text-align: center;
  margin-top: calc(var(--spacing-unit) * 2);
  font-size: 0.85rem;
  color: var(--muted-text-color);
}

// Responsive adjustments
@media (max-width: 1024px) { // Adjusted breakpoint for better form handling
  .order-book-page-container {
    flex-direction: column;
  }

  .order-entry-form-container {
    width: 100%; // Full width when stacked
    margin-top: calc(var(--spacing-unit) * 2);
  }
}

@media (max-width: 768px) {
  .order-book-container { // This is for bids/asks within the main content
    flex-direction: column; // Stack bids and asks on smaller screens
    gap: calc(var(--spacing-unit) * 2);
  }

  .bids, .asks { // These are inside .order-book-main-content
    min-width: 100%; // Take full width when stacked
  }

  h2 {
    font-size: 1.3rem;
  }

  table {
    th, td {
      padding: calc(var(--spacing-unit) * 0.75) var(--spacing-unit);
      font-size: 0.9rem;
    }
    td {
      font-size: 0.9rem;
    }
  }
}
